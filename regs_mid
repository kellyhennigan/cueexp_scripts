#! /bin/csh


#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
#                                                                        
#    3dDeconvolve Regression
#
#    Auto-generated by ScriptWriter.py
#    kiefer katovich 2012
#
#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-


set MAINDIR = ${HOME}/cueexp
set SCRIPTSDIR = ${MAINDIR}/scripts
set DATADIR = ${MAINDIR}/data

# set to 1 to use last vols of run, otherwise 0
set wEND = 0
if ($wEND == 1) then
	set REGFILE = mid_vecs_wEnd.txt
	set nvols = 548
else 	
	set REGFILE = mid_vecs.txt
	set nvols = 540
endif	



#-#-#-#-#-#-#-#-#-#-#-		Cycle through subjects:		-#-#-#-#-#-#-#-#-#-#-#


foreach subject (zl150930    ps151001    dw151003    aa151010    al151016    ag151024    sr151031    vm151031   si151120    jg151121    tf151127    wr151127    ja151218    tm160117    kl160122    as160129    wh160130    ss160205    rp160205    bp160213    cs160214    nb160221    rf160313    jw160316    pk160319    jc160320    jc160321    bb160402)


    cd ${DATADIR}/${subject}/behavior
    echo processing ${subject} 



#-#-#-#-#-#-#-#-#-#-#-		Run makeVec on model file:		-#-#-#-#-#-#-#-#-#-#-#

	
	python ${SCRIPTSDIR}/makeVec.py ${SCRIPTSDIR}/${REGFILE}
	


#-#-#-#-#-#-#-#-#-#-#-		Run waver on vectors:		-#-#-#-#-#-#-#-#-#-#-#

	waver -dt 2.0 -GAM -numout ${nvols} -input ant_mid.1D > ant_midc.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input out_mid.1D > out_midc.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input gvn_ant_mid.1D > gvn_ant_midc.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input lvn_ant_mid.1D > lvn_ant_midc.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input gvn_out_mid.1D > gvn_out_midc.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input nvl_out_mid.1D > nvl_out_midc.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input lvn_out_mid.1D > lvn_out_midc.1D

	mv *1D ../regs

end