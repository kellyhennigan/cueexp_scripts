#! /bin/csh


#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
#                                                                        
#    3dDeconvolve Regression
#
#    Auto-generated by ScriptWriter.py
#    kiefer katovich 2012
#
#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-


#set MAINDIR = /home/hennigan/cueexp
set MAINDIR = /Users/Kelly/cueexp

set SCRIPTSDIR = ${MAINDIR}/scripts
set DATADIR = ${MAINDIR}/data
set OUTDIR = ${DATADIR}/results_mid


#-#-#-#-#-#-#-#-#-#-#-		Cycle through subjects:		-#-#-#-#-#-#-#-#-#-#-#


#foreach subject ( nd150921    zl150930    ps151001    dw151003    aa151010    al151016    ag151024    sr151031	vm151031    si151120    jg151121    tf151127    wr151127    ja151218    tm160117    kl160122    as160129    wh160130    ss160205    rp160205    bp160213    cs160214    nb160221    #rf160313	jw160316    pk160319    jc160320	jc160321    bb160402 )

foreach subject ( zl150930 )

    cd ${DATADIR}/${subject}/func_proc_mid
    echo processing ${subject} 



#-#-#-#-#-#-#-#-#-#-#-		Run 3dDeconvolve:		-#-#-#-#-#-#-#-#-#-#-#

	3dDeconvolve -float -jobs 4 -input pp_mid.nii -concat ${SCRIPTSDIR}/mid_runs.1D -nfirst 0 -num_stimts 14 -polort 2 -dmbase -censor motion_censor.1D \
		-stim_file 1 'vr.1D[1]' -stim_label 1 'roll' \
		-stim_file 2 'vr.1D[2]' -stim_label 2 'pitch' \
		-stim_file 3 'vr.1D[3]' -stim_label 3 'yaw' \
		-stim_file 4 'vr.1D[4]' -stim_label 4 'dS' \
		-stim_file 5 'vr.1D[5]' -stim_label 5 'dL' \
		-stim_file 6 'vr.1D[6]' -stim_label 6 'dP' \
		-stim_file 7 'csf.1D' -stim_label 7 'csf' \
		-stim_file 8 'wm.1D' -stim_label 8 'wm' \
		-stim_file 9 '../regs_mid/ant_midc.1D' -stim_label 9 'ant' \
		-stim_file 10 '../regs_mid/out_midc.1D' -stim_label 10 'out' \
		-stim_file 11 '../regs_mid/gvnant_midc.1D' -stim_label 11 'gvnant' \
		-stim_file 12 '../regs_mid/lvnant_midc.1D' -stim_label 12 'lvnant' \
		-stim_file 13 '../regs_mid/gvnout_midc.1D' -stim_label 13 'gvnout' \
		-stim_file 14 '../regs_mid/nvlout_midc.1D' -stim_label 14 'nvlout' \
		-tout -fout -bucket ${subject}_glm
	


#-#-#-#-#-#-#-#-#-#-#-		Write zscored dataset:		-#-#-#-#-#-#-#-#-#-#-#

	
	#3dmerge -doall -1zscore -prefix ${subject}_zmid ${subject}_glm+tlrc
	
	
#-#-#-#-#-#-#-#-#-#-#-		Remove non-zscored dataset:		-#-#-#-#-#-#-#-#-#-#-#

	#rm -rf mid_glm+tlrc*
	
#-#-#-#-#-#-#-#-#-#-#-		move results to results dir		-#-#-#-#-#-#-#-#-#-#-#
	

	mv *glm* ../../results_mid/
	
end


