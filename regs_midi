#! /bin/csh


#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-
#                                                                        
#    3dDeconvolve Regression
#
#    Auto-generated by ScriptWriter.py
#    kiefer katovich 2012
#
#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-

# this version of midi vecs assumes that 4 rows are added to the end of each scan run, coresponding to the last 4 TRs in each run 

cd ..
set MAINDIR = $PWD
# set MAINDIR = ${HOME}/cueexp
set SCRIPTSDIR = ${MAINDIR}/scripts
set DATADIR = ${MAINDIR}/data

# define directories w/behavior data (INDIR) and for saving out regs (OUTDIR)
# directories are relative to subject specific dir
set INDIR = behavior 	
set OUTDIR = regs 	

set REGFILE = midi_vecs.txt
set nvols = 584



#-#-#-#-#-#-#-#-#-#-#-		Cycle through subjects:		-#-#-#-#-#-#-#-#-#-#-#


# foreach subject ( nd150921 zl150930 ps151001 dw151003 ie151020 aa151010 al151016 ag151024 jv151030 sr151031 vm151031 si151120 jg151121 tf151127 wr151127 ja151218 tm160117 kl160122 as160129 wh160130 ss160205 rp160205 bp160213 cs160214 nb160221 rf160313 jw160316 as160317 pk160319 jc160320 jc160321 bb160402 jn160403 rb160407 rv160413 ac160415 ja160416 rt160420 jr160507 yl160507 ps160508 cm160510 mp160511 tj160529 at160601 zm160627 ) 

foreach subject ( rc191015 )

    cd ${DATADIR}/${subject}
    echo processing ${subject} 

    if (! -d ${OUTDIR}) then
		mkdir ${OUTDIR}
	endif

	cd ${INDIR}



#-#-#-#-#-#-#-#-#-#-#-		Run makeVec on model file:		-#-#-#-#-#-#-#-#-#-#-#

	
	python ${SCRIPTSDIR}/makeVec.py ${SCRIPTSDIR}/${REGFILE}
	


#-#-#-#-#-#-#-#-#-#-#-		Run waver on vectors:		-#-#-#-#-#-#-#-#-#-#-#

	waver -dt 2.0 -GAM -numout ${nvols} -input ant_midi.1D > ant_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input out_midi.1D > out_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input target_midi.1D > target_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input gvn_ant_midi.1D > gvn_ant_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input lvn_ant_midi.1D > lvn_ant_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input gvn_out_midi.1D > gvn_out_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input nvl_out_midi.1D > nvl_out_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input lvn_out_midi.1D > lvn_out_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input gvng_tar_midi.1D > gvng_tar_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input gvngXwin_out_midi.1D > gvngXwin_out_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input gvnXgvng_tar_midi.1D > gvnXgvng_tar_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input lvnXgvng_tar_midi.1D > lvnXgvng_tar_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input gvnXgvngXwin_tar_midi.1D > gvnXgvngXwin_tar_midic.1D
	waver -dt 2.0 -GAM -numout ${nvols} -input lvnXgvngXwin_tar_midi.1D > lvnXgvngXwin_tar_midic.1D

	mv *1D ../${OUTDIR}

end
